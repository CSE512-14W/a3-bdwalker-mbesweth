<!DOCTYPE html>
<html lang="en">
	<head>
		 <meta charset="utf-8">
        <title>D3 Test</title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="d3.css">
        <script type="text/javascript" src="d3.v3/d3.v3.js"></script>
        <script type="text/javascript"
          src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAGL4l6AvrKxqUdGyc2yRvrMDw3cJ4eZKY&sensor=false">
        </script>
        <style>
          html, body, #map-canvas {
            height: 100%;
            margin: 0px;
            padding: 0px
          }
        </style>
        <script type="text/javascript">  
          function initialize() {

            var style = [
            {
              "featureType": "water",
              "stylers": [
                { "color": "#000000" }
              ]
            },{
              "featureType": "landscape",
              "stylers": [
                { "color": "#393939" }
              ]
            },{
              "featureType": "road",
              "stylers": [
                { "color": "#6e6f6e" }
              ]
            },{
              "featureType": "administrative.neighborhood",
              "stylers": [
                { "visibility": "off" }
              ]
            },{
              "featureType": "administrative.locality",
              "stylers": [
                { "visibility": "off" }
              ]
            },{
              "featureType": "poi",
              "stylers": [
                { "visibility": "off" }
              ]
            },{
              "featureType": "transit.line",
              "stylers": [
                { "visibility": "off" }
              ]
            },{
              "featureType": "road",
              "stylers": [
                { "visibility": "simplified" }
              ]
            },{
              "elementType": "labels",
              "stylers": [
                { "visibility": "off" }
              ]
            }];

            var styledMap = new google.maps.StyledMapType(style, {name: "Seattle Styled"});

            var mapOptions = 
            {
              zoom: 12,
              center: new google.maps.LatLng(47.6097, -122.33),
              mapTypeControlOptions: {
                mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']
              }
            };

            var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
            map.mapTypes.set('map_style', styledMap);
            map.setMapTypeId('map_style');

          };


          function loadScript() {
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false';
            document.body.appendChild(script);
          }

          google.maps.event.addDomListener(window, 'load', initialize);
        </script>
	</head>
	<body>
    <script type="text/javascript">
      var URL = "http://data.seattle.gov/resource/3k2p-39jp.json";
      var TOKEN = "DpnZlymDFh48LN2JHFUGyM7et"
      var QUERY = "longitude";
      var LIMIT = 1;

      d3.csv(URL + "?$select=" + QUERY + "&$limit=" + LIMIT + "&$$app_token=" + TOKEN
        , function (error, data) {
        
        // Make sure our numbers are really numbers
        data.forEach(function (d) {
          d.event_clearance_code = +d.event_clearance_code;
          d.event_clearance_date = +d.event_clearance_date;
          d.longitude = +d.longitude;
          d.latitude = +d.latitude;
        });
      });
    </script>
    <div id="map-canvas">
    </div>
    </body>
</html>